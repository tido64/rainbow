if(MINGW OR UNIX)
  if(UNIT_TESTS)
    set(RAINBOW_COMMON_CFLAGS "-frtti -fexceptions --coverage")
  else()
    set(RAINBOW_COMMON_CFLAGS "-fno-rtti -fno-exceptions")
  endif()
  if(MINGW)
    set(RAINBOW_CSTD   "-std=gnu11")
    set(RAINBOW_CXXSTD "-std=gnu++1z")
  else()
    if(${CMAKE_C_COMPILER_ID} STREQUAL "GNU")
      set(RAINBOW_CSTD "-std=gnu11")
    else()
      set(RAINBOW_CSTD "-std=c11")
    endif()
    set(RAINBOW_CXXSTD "-std=c++1z")
    if(ANDROID)
      unset(APPLE)
      unset(WIN32)
      set(UNIX ON)
    elseif(EMSCRIPTEN)
      set(USE_FMOD_STUDIO OFF)
    elseif(NOT APPLE)
      # Common C-/C++ compiler flags
      set(RAINBOW_COMMON_CFLAGS "${RAINBOW_COMMON_CFLAGS} -fstack-protector -fpie -march=native")
    endif()

    # Compiler warning flags
    set(RAINBOW_CXX_WARNINGS -Werror -pedantic -Wall -Wextra -Wold-style-cast -Woverloaded-virtual -Wsign-promo)
  endif()

  # Set CFLAGS and CXXFLAGS
  set(CFLAG_NO_WARNINGS -w)
  set(RAINBOW_C_FLAGS   "-pipe ${RAINBOW_CSTD} ${CFLAG_NO_WARNINGS} ${RAINBOW_COMMON_CFLAGS}")
  set(RAINBOW_CXX_FLAGS "-pipe ${RAINBOW_CXXSTD} ${RAINBOW_COMMON_CFLAGS}")
  if(${CMAKE_C_FLAGS} MATCHES "-isystem")
    set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${RAINBOW_C_FLAGS}")
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${RAINBOW_CXX_FLAGS}")
  else()
    set(CMAKE_C_FLAGS ${RAINBOW_C_FLAGS})
    set(CMAKE_CXX_FLAGS ${RAINBOW_CXX_FLAGS})
  endif()

  if(NOT APPLE)
    # Debug- and release-specific flags
    set(CMAKE_CXX_FLAGS_DEBUG   "-g -O0 -ftrapv")
    set(CMAKE_CXX_FLAGS_RELEASE "-Os -D_FORTIFY_SOURCE=2")
  endif()
endif()
