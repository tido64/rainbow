language: cpp
branches:
  only:
    - master
matrix:
  include:
    - os: linux
      dist: trusty
      env: BUILD_TYPE=Debug
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-7
            - libpulse-dev
            - libsdl2-dev
            - ninja-build
            - pulseaudio
    - os: linux
      dist: trusty
      env: BUILD_TYPE=MinSizeRel
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-7
            - libpulse-dev
            - libsdl2-dev
            - ninja-build
            - pulseaudio
    - os: linux
      dist: trusty
      env: BUILD_TYPE=RelWithDebInfo
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - g++-7
            - libpulse-dev
            - libsdl2-dev
            - ninja-build
            - pulseaudio
    - os: osx
      osx_image: xcode9.2
      env: BUILD_TYPE=Debug
    - os: osx
      osx_image: xcode9.2
      env: BUILD_TYPE=MinSizeRel
    - os: osx
      osx_image: xcode9.2
      env: BUILD_TYPE=RelWithDebInfo
    - os: osx
      osx_image: xcode9.2
      env: BUILD_TYPE=iOS
    - language: android
      android:
        components:
          - tools
          - platform-tools
          - tools
          - build-tools-28.0.0
          - android-27
      jdk: openjdk8
      env: BUILD_TYPE=Android
cache:
  directories:
    - local
before_install:
  - tools/travis.sh before_install
script:
  - tools/travis.sh script
after_success:
  - tools/travis.sh after_success
notifications:
  email: false
